generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Jogador {
  id         String    @id
  name       String
  phone      String    @unique
  profileImage Bytes?
  pokeCoins  Int       @default(500)
  diaryLogin DateTime?
  items      Json?
  pokemons   Pokemon[]

  Item Item[]
}

model Pokemon {
  id                 Int      @id @default(autoincrement())
  specieId           Int
  name               String
  level              Int
  exp                Int
  currentHp          Int
  types              String[]
  evolutionStage     Int
  nextEvolutionLevel Int
  caughtDate         DateTime @default(now())

  jogadorId String
  owner     Jogador @relation(fields: [jogadorId], references: [id])

  ivId Int? @unique
  iv   Iv?  @relation(fields: [ivId], references: [id])

  baseStatsId Int?       @unique
  baseStats   BaseStats? @relation(fields: [baseStatsId], references: [id])

  moves Move[]
}

model Iv {
  id             Int @id @default(autoincrement())
  hp             Int
  speed          Int
  attack         Int
  defense        Int
  specialAttack  Int
  specialDefense Int

  pokemon Pokemon?
}

model BaseStats {
  id             Int @id @default(autoincrement())
  hp             Int
  speed          Int
  attack         Int
  defense        Int
  specialAttack  Int
  specialDefense Int

  pokemon Pokemon?
}

model Move {
  id           Int    @id @default(autoincrement())
  name         String
  type         String
  maxPp        Int
  currentPp    Int
  power        Int
  accuracy     Int
  moveCategory String

  pokemonId Int?
  pokemon   Pokemon? @relation(fields: [pokemonId], references: [id])
}

model Item {
  id           Int    @id @default(autoincrement())
  pokeBalls    Int    @default(5)
  potions      Int    @default(0)
  revives      Int    @default(0)
  totalCures   Int    @default(0)
  rareCandies  Int    @default(0)
  jogadorId    String
  jogador      Jogador @relation(fields: [jogadorId], references: [id])
}
